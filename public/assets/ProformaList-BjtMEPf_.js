import{r as c,o as y,d as v,a as g,w as u,b,e as w,f as a,g as t,k as n,l as k,i as m,j as p,F as P,m as C,t as l,p as F}from"./index-CfG8UM58.js";const j={class:"p-6"},D={class:"flex justify-between mb-4"},V={class:"overflow-auto rounded shadow bg-white"},B={class:"border-collapse w-full table-auto border text-sm leading-tight"},M={class:"p-2 font-medium"},N={class:"px-2 py-1.5"},$={class:"px-2 py-1.5"},L={class:"px-2 py-1.5"},A={class:"p-2 text-right"},E={class:"px-2 py-1"},H=["onClick"],I={class:"px-2 py-1.5"},S={class:"px-2 py-1.5"},T={class:"bg-white w-full max-w-5xl rounded-lg shadow-lg overflow-hidden"},z={class:"p-2"},G={key:0,class:"p-6 text-center text-gray-600"},O=["data"],U=["src"],K={__name:"ProformaList",setup(Z){const f=c([]),d=c(!1),r=c(""),i=c(!1),x=async o=>{if(!o||!o.id){console.warn("openProformaPdf called without proforma row:",o);return}i.value=!0,d.value=!0,r.value="";try{const e=await v.get(`proforma/view/${o.id}`);r.value=e.data.url}catch(e){console.error(e),d.value=!1,alert(e?.response?.data?.message||"Failed to generate PDF")}finally{i.value=!1}},h=()=>{d.value=!1,r.value="",i.value=!1};return y(async()=>{const o=await v.get("proforma");f.value=o.data.data}),(o,e)=>{const _=w("router-link");return a(),g(b,null,{default:u(()=>[t("div",j,[t("div",D,[e[1]||(e[1]=t("h2",{class:"text-xl font-bold"},"Proforma Invoices",-1)),m(_,{to:"/proformas/add",class:"bg-blue-600 text-white px-4 py-2 rounded transition duration-300 ease-in-out hover:-translate-y-1 hover:scale-105 hover:bg-blue-700 text-center md:text-left"},{default:u(()=>e[0]||(e[0]=[p("+ Create Proforma")])),_:1,__:[0]})]),t("div",V,[t("table",B,[e[4]||(e[4]=t("thead",{class:"bg-gray-100 text-gray-700 font-semibold"},[t("tr",null,[t("th",{class:"px-2 py-1.5"},"Proforma No"),t("th",{class:"px-2 py-1.5"},"Customer"),t("th",{class:"px-2 py-1.5"},"Invoice Date"),t("th",{class:"px-2 py-1.5"},"Currency"),t("th",{class:"p-2 text-right"},"Total"),t("th",{class:"p-2 text-right"},"PDF"),t("th",{class:"px-2 py-1.5"},"Status"),t("th",{class:"px-2 py-1.5"},"Actions")])],-1)),t("tbody",null,[(a(!0),n(P,null,C(f.value,s=>(a(),n("tr",{key:s.id,class:"border-t"},[t("td",M,l(s.proforma_no),1),t("td",N,l(s.customer_name),1),t("td",$,l(s.invoice_date),1),t("td",L,l(s.currency),1),t("td",A,l(s.total),1),t("td",E,[t("button",{type:"button",class:"inline-flex items-center gap-1 text-blue-600 hover:underline",onClick:q=>x(s)},e[2]||(e[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})],-1),p(" View ")]),8,H)]),t("td",I,l(s.status),1),t("td",S,[m(_,{to:`/proformas/edit/${s.id}`,class:"text-blue-600"},{default:u(()=>e[3]||(e[3]=[p("Edit")])),_:2,__:[3]},1032,["to"])])]))),128))])])])]),d.value?(a(),n("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4",onClick:F(h,["self"])},[t("div",T,[t("div",{class:"flex items-center justify-between px-4 py-3 border-b"},[e[5]||(e[5]=t("div",{class:"font-semibold"},"Proforma PDF",-1)),t("button",{class:"px-3 py-1 border rounded hover:bg-gray-50",onClick:h}," Close ")]),t("div",z,[i.value?(a(),n("div",G,"Generating PDF...")):(a(),n("object",{key:1,data:r.value,type:"application/pdf",class:"w-full",style:{height:"75vh"}},[t("iframe",{src:r.value,class:"w-full",style:{height:"75vh"}},null,8,U)],8,O))])])])):k("",!0)]),_:1})}}};export{K as default};
