import{_ as C,s as w,r as v,o as S,d as b,a as P,w as q,b as R,u as E,f as r,g as e,p as $,h as d,k as u,F as p,m,t as B,q as D,v as i}from"./index-Dv5Rhcvw.js";const M={class:"p-6 max-w-3xl mx-auto bg-white shadow rounded-lg"},A=["value"],F=["onUpdate:modelValue"],N=["onUpdate:modelValue"],j=["onUpdate:modelValue"],I=["onUpdate:modelValue"],L={class:"flex flex-col justify-end"},z={class:"flex gap-2"},G=["onUpdate:modelValue"],H=["onClick"],J=["onUpdate:modelValue"],K=["onUpdate:modelValue"],O={class:"flex items-end"},Q=["onClick"],W=["onUpdate:modelValue"],X=["onUpdate:modelValue"],Y={class:"flex items-end"},Z=["onClick"],ee={__name:"TariffEdit",setup(te){const _=w(),x=E(),f=_.params.id,c=v([]),a=v({room_type_id:"",periods:[],supplements:[],transfers:[]});S(async()=>{const[n,t]=await Promise.all([b.get("roomtypes"),b.get(`tariffs/${f}`)]);c.value=n.data;const l=t.data;a.value.room_type_id=l.tariff.room_type_id,a.value.periods=l.periods.map(s=>({id:s.id,start_date:s.start_date,end_date:s.end_date,single_rate:s.single_rate,double_rate:s.double_rate,extra_rate:s.extra_rate})),a.value.supplements=l.supplements.map(s=>({id:s.id,name:s.name,price:s.price})),a.value.transfers=l.transfers.map(s=>({id:s.id,type:s.type,price:s.price}))});function y(){a.value.periods.push({start_date:"",end_date:"",single_rate:0,double_rate:0,extra_rate:0})}function g(n){a.value.periods.splice(n,1)}function k(){a.value.supplements.push({name:"",price:0})}function U(n){a.value.supplements.splice(n,1)}function V(){a.value.transfers.push({type:"",price:0})}function h(n){a.value.transfers.splice(n,1)}async function T(){try{await b.put(`tariffs/${f}`,{room_type_id:a.value.room_type_id,periods:a.value.periods,supplements:a.value.supplements,transfers:a.value.transfers}),x.push("/tariffs")}catch(n){alert(n.response?.data?.message||"Failed to update tariff.")}}return(n,t)=>(r(),P(R,null,{default:q(()=>[e("div",M,[t[16]||(t[16]=e("h2",{class:"text-2xl font-semibold mb-6 border-b pb-2"},"Edit Tariff",-1)),e("form",{onSubmit:$(T,["prevent"]),class:"space-y-8"},[e("div",null,[t[2]||(t[2]=e("label",{class:"block font-medium mb-1"},"Room Type *",-1)),d(e("select",{"onUpdate:modelValue":t[0]||(t[0]=l=>a.value.room_type_id=l),class:"input-field",required:""},[t[1]||(t[1]=e("option",{disabled:"",value:""},"Select a room type",-1)),(r(!0),u(p,null,m(c.value,l=>(r(),u("option",{key:l.id,value:l.id},B(l.name),9,A))),128))],512),[[D,a.value.room_type_id]])]),e("div",null,[t[8]||(t[8]=e("h3",{class:"font-semibold mb-2"},"Tariff Periods",-1)),(r(!0),u(p,null,m(a.value.periods,(l,s)=>(r(),u("div",{key:s,class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4"},[e("div",null,[t[3]||(t[3]=e("label",{class:"block text-sm mb-1"},"Start Date *",-1)),d(e("input",{"onUpdate:modelValue":o=>l.start_date=o,type:"date",class:"input-field",required:""},null,8,F),[[i,l.start_date]])]),e("div",null,[t[4]||(t[4]=e("label",{class:"block text-sm mb-1"},"End Date *",-1)),d(e("input",{"onUpdate:modelValue":o=>l.end_date=o,type:"date",class:"input-field",required:""},null,8,N),[[i,l.end_date]])]),e("div",null,[t[5]||(t[5]=e("label",{class:"block text-sm mb-1"},"Single Rate *",-1)),d(e("input",{"onUpdate:modelValue":o=>l.single_rate=o,type:"number",min:"0",class:"input-field",required:""},null,8,j),[[i,l.single_rate,void 0,{number:!0}]])]),e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm mb-1"},"Double Rate *",-1)),d(e("input",{"onUpdate:modelValue":o=>l.double_rate=o,type:"number",min:"0",class:"input-field",required:""},null,8,I),[[i,l.double_rate,void 0,{number:!0}]])]),e("div",L,[e("div",z,[t[7]||(t[7]=e("label",{class:"text-sm"},"Extra Person",-1)),d(e("input",{"onUpdate:modelValue":o=>l.extra_rate=o,type:"number",min:"0",class:"input-field w-24",required:""},null,8,G),[[i,l.extra_rate,void 0,{number:!0}]]),e("button",{type:"button",onClick:o=>g(s),class:"text-red-600 hover:text-red-800"},"✕",8,H)])])]))),128)),e("button",{type:"button",onClick:y,class:"text-blue-600 hover:underline"},"+ Add Period")]),e("div",null,[t[11]||(t[11]=e("h3",{class:"font-semibold mb-2"},"Meal Supplements",-1)),(r(!0),u(p,null,m(a.value.supplements,(l,s)=>(r(),u("div",{key:s,class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm mb-1"},"Name",-1)),d(e("input",{"onUpdate:modelValue":o=>l.name=o,type:"text",class:"input-field",placeholder:"e.g. Breakfast"},null,8,J),[[i,l.name]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm mb-1"},"Price",-1)),d(e("input",{"onUpdate:modelValue":o=>l.price=o,type:"number",min:"0",class:"input-field"},null,8,K),[[i,l.price,void 0,{number:!0}]])]),e("div",O,[e("button",{type:"button",onClick:o=>U(s),class:"text-red-600 hover:text-red-800"},"✕",8,Q)])]))),128)),e("button",{type:"button",onClick:k,class:"text-blue-600 hover:underline"},"+ Add Supplement")]),e("div",null,[t[14]||(t[14]=e("h3",{class:"font-semibold mb-2"},"Transfer Charges",-1)),(r(!0),u(p,null,m(a.value.transfers,(l,s)=>(r(),u("div",{key:s,class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},[e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm mb-1"},"Type",-1)),d(e("input",{"onUpdate:modelValue":o=>l.type=o,type:"text",class:"input-field",placeholder:"e.g. Airport Pickup"},null,8,W),[[i,l.type]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm mb-1"},"Price",-1)),d(e("input",{"onUpdate:modelValue":o=>l.price=o,type:"number",min:"0",class:"input-field"},null,8,X),[[i,l.price,void 0,{number:!0}]])]),e("div",Y,[e("button",{type:"button",onClick:o=>h(s),class:"text-red-600 hover:text-red-800"},"✕",8,Z)])]))),128)),e("button",{type:"button",onClick:V,class:"text-blue-600 hover:underline"},"+ Add Transfer Charge")]),t[15]||(t[15]=e("div",{class:"text-right"},[e("button",{type:"submit",class:"bg-green-600 hover:bg-green-700 text-white px-6 py-2 rounded-lg"}," Update Tariff ")],-1))],32)])]),_:1}))}},se=C(ee,[["__scopeId","data-v-07f67fd9"]]);export{se as default};
